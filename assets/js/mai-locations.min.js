function initLocations(){function e(){Object.keys(r).forEach(e=>{if(e in s){var a=Array.isArray(s[e])?s[e].join():s[e].toString(),o=Array.isArray(r[e])?r[e]:r[e].toString();""!==a&&a!==o?t.searchParams.set(e,a):t.searchParams.delete(e)}}),window.location=t.href.replace(/\/page\/\d+/,"")}const t=new URL(window.location.href),a=document.querySelectorAll(".mailocations-map"),o=document.querySelectorAll(".mailocations-autocomplete"),n=document.querySelectorAll(".mailocations-filter"),l=document.querySelectorAll(".mailocations-filter-clear"),r=maiLocationsVars.defaults,s=maiLocationsVars.params,i=maiLocationsVars.autoComplete;for(const e of a){let t=null;const a=e.querySelectorAll(".marker"),o=new google.maps.Map(e,{zoom:parseInt(e.dataset.zoom),mapTypeId:google.maps.MapTypeId.ROADMAP,center:s.lat&&s.lng?{lat:parseFloat(s.lat),lng:parseFloat(s.lng)}:null});if(o.markers=[],s.lat&&s.lng){const e={path:"M96 0c35.346 0 64 28.654 64 64s-28.654 64-64 64-64-28.654-64-64S60.654 0 96 0m48 144h-11.36c-22.711 10.443-49.59 10.894-73.28 0H48c-26.51 0-48 21.49-48 48v136c0 13.255 10.745 24 24 24h16v136c0 13.255 10.745 24 24 24h64c13.255 0 24-10.745 24-24V352h16c13.255 0 24-10.745 24-24V192c0-26.51-21.49-48-48-48z",fillColor:"rgba(0,0,0,0.8)",fillOpacity:1,strokeWeight:0,scale:.05,anchor:new google.maps.Point(110,600)};t=new google.maps.Marker({position:{lat:parseFloat(s.lat),lng:parseFloat(s.lng)},map:o,icon:e,animation:google.maps.Animation.DROP}),o.markers.push(t)}for(const e of a){var c=new google.maps.Marker({position:{lat:parseFloat(e.dataset.lat),lng:parseFloat(e.dataset.lng)},map:o});if(e.innerHTML){var m=new google.maps.InfoWindow({content:e.innerHTML});c.infowindow=m,c.addListener("click",function(){return this.infowindow.open(o,this)})}o.markers.push(c)}new markerClusterer.MarkerClusterer({map:o,markers:o.markers});const n=new google.maps.LatLngBounds;for(const e of o.markers)n.extend(e.getPosition());1===o.markers.length?o.setCenter(n.getCenter()):o.fitBounds(n)}for(const t of o){let a=t.parentElement.parentElement.querySelectorAll(".mailocations-autocomplete-distance"),o=t.parentElement.parentElement.querySelectorAll(".mailocations-autocomplete-unit"),n=t.parentElement.querySelectorAll(".mailocations-autocomplete-clear")[0];a="undefined"!==a?a[0]:"",o="undefined"!==o?o[0]:"";const l=new google.maps.places.Autocomplete(t,i);l.addListener("place_changed",function(){const a=l.getPlace();if(!a||!a.geometry)return;const o=a.geometry.location.lat(),n=a.geometry.location.lng();let r=null,i=null,c=null;if(a.address_components){for(const e of a.address_components){var m=e.types[0];"country"===m&&(r=e.short_name),"administrative_area_level_1"===m&&(i=e.short_name)}r&&("US"===r?i&&(s.state=i):c&&(s.province=c))}s.address=t.value,s.lat=o,s.lng=n,e()}),a&&a.addEventListener("change",function(){s.distance=this.value,s.address&&e()}),o&&o.addEventListener("change",function(){s.unit=this.value,s.address&&e()}),n.addEventListener("click",function(){var a=t.getAttribute("value");t.setAttribute("value",""),t.value="",s.address="",s.lat="",s.lng="",s.state="",s.province="",a&&e()})}for(const t of n){let a,o;t.addEventListener("change",function(){a="select"===this.tagName.toLowerCase(),o="radio"===this.getAttribute("type"),s[this.dataset.filter]=this.dataset.filter in s?s[this.dataset.filter]:[],this.checked||a?a&&!this.value?s[this.dataset.filter]=[]:o||a?s[this.dataset.filter]=[this.value]:s[this.dataset.filter].push(this.value):s[this.dataset.filter].splice(s[this.dataset.filter].indexOf(this.value),1),e()})}for(const t of l)t.addEventListener("click",function(){Object.keys(s).forEach(e=>{s[e]=""}),e()})}document.addEventListener("DOMContentLoaded",function(){if(document.querySelectorAll(".mailocations-map").length||document.querySelectorAll(".mailocations-autocomplete").length){const e=document.getElementById("mai-locations-js"),t=document.createElement("script");let a=`https://maps.googleapis.com/maps/api/js?key=${maiLocationsVars.apiKey}`;if(document.querySelectorAll(".mailocations-map").length){const t=document.createElement("script");t.src=maiLocationsVars.markerCluster,e.parentElement.insertBefore(t,e)}document.querySelectorAll(".mailocations-autocomplete").length&&(a+="&libraries=places"),t.src=a+="&callback=initLocations",e.parentElement.insertBefore(t,e)}else initLocations()});