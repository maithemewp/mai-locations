if(document.querySelectorAll(".mailocations-map").length||document.querySelectorAll(".mailocations-autocomplete").length){const e=document.getElementById("mai-locations-js"),t=document.createElement("script");let a=`https://maps.googleapis.com/maps/api/js?key=${maiLocationsVars.apiKey}`;if(document.querySelectorAll(".mailocations-autocomplete").length&&(a+="&libraries=places"),t.src=a+="&callback=initLocations",e.parentElement.insertBefore(t,e),document.querySelectorAll(".mailocations-map").length){const t=document.createElement("script");t.src=maiLocationsVars.markerCluster,e.parentElement.insertBefore(t,e)}}else initLocations();function initLocations(){const e=new URL(window.location.href),t=document.querySelectorAll(".mailocations-map"),a=document.querySelectorAll(".mailocations-autocomplete"),o=document.querySelectorAll(".mailocations-filter"),n=document.querySelectorAll(".mailocations-filter-clear"),l=maiLocationsVars.defaults,s=maiLocationsVars.params,r=maiLocationsVars.autoComplete;for(const e of t){const t=e.querySelectorAll(".marker"),a=new google.maps.Map(e,{zoom:parseInt(e.dataset.zoom),mapTypeId:google.maps.MapTypeId.ROADMAP});if(a.markers=[],s.lat&&s.lng){const e={path:"M96 0c35.346 0 64 28.654 64 64s-28.654 64-64 64-64-28.654-64-64S60.654 0 96 0m48 144h-11.36c-22.711 10.443-49.59 10.894-73.28 0H48c-26.51 0-48 21.49-48 48v136c0 13.255 10.745 24 24 24h16v136c0 13.255 10.745 24 24 24h64c13.255 0 24-10.745 24-24V352h16c13.255 0 24-10.745 24-24V192c0-26.51-21.49-48-48-48z",fillColor:"rgba(0,0,0,0.8)",fillOpacity:1,strokeWeight:0,scale:.05},t=new google.maps.Marker({position:{lat:parseFloat(s.lat),lng:parseFloat(s.lng)},map:a,icon:e,animation:google.maps.Animation.DROP});a.markers.push(t)}for(const e of t){var i=new google.maps.Marker({position:{lat:parseFloat(e.dataset.lat),lng:parseFloat(e.dataset.lng)},map:a});if(a.markers.push(i),e.innerHTML){var c=new google.maps.InfoWindow({content:e.innerHTML});google.maps.event.addListener(i,"click",(function(){c.open(a,i)}))}}new markerClusterer.MarkerClusterer({map:a,markers:a.markers});const o=new google.maps.LatLngBounds;for(const e of a.markers)o.extend({lat:e.position.lat(),lng:e.position.lng()});1===a.markers.length?a.setCenter(o.getCenter()):a.fitBounds(o)}for(const e of a){let t=e.parentElement.parentElement.querySelectorAll(".mailocations-autocomplete-distance"),a=e.parentElement.parentElement.querySelectorAll(".mailocations-autocomplete-unit"),o=e.parentElement.querySelectorAll(".mailocations-autocomplete-clear")[0];t="undefined"!==t?t[0]:"",a="undefined"!==a?a[0]:"";const n=new google.maps.places.Autocomplete(e,r);n.addListener("place_changed",(function(){const t=n.getPlace();if(!t||!t.geometry)return;const a=t.geometry.location.lat(),o=t.geometry.location.lng();let l=null,r=null;if(t.address_components){for(const e of t.address_components){var i=e.types[0];"country"===i&&(l=e.short_name),"administrative_area_level_1"===i&&(r=e.short_name)}l&&"US"===l&&r&&(s.state=r)}s.address=e.value,s.lat=a,s.lng=o,m()})),t&&t.addEventListener("change",(function(){s.distance=this.value,s.address&&m()})),a&&a.addEventListener("change",(function(){s.unit=this.value,s.address&&m()})),o.addEventListener("click",(function(){var t=e.getAttribute("value");e.setAttribute("value",""),e.value="",s.address="",s.lat="",s.lng="",s.state="",s.province="",t&&m()}))}for(const e of o){let t;e.addEventListener("change",(function(){t="select"===this.tagName.toLowerCase(),s[this.dataset.filter]=this.dataset.filter in s?s[this.dataset.filter]:[],this.checked||t?t&&!this.value?s[this.dataset.filter]=[]:s[this.dataset.filter].push(this.value):s[this.dataset.filter].splice(s[this.dataset.filter].indexOf(this.value),1),m()}))}for(const e of n)e.addEventListener("click",(function(){Object.keys(s).forEach((e=>{s[e]=""})),m()}));function m(){Object.keys(l).forEach((t=>{if(t in s){var a=Array.isArray(s[t])?s[t].join():s[t].toString(),o=Array.isArray(l[t])?l[t]:l[t].toString();""!==a&&a!==o?e.searchParams.set(t,a):e.searchParams.delete(t)}})),window.location=e.href.replace(/\/page\/\d+/,"")}}