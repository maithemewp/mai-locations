function initLocations(){function e(){const e=document.getElementsByTagName("main")[0];e.classList.add("mai-locations-loading");const a=document.createElement("div");a.classList.add("mai-locations-loader"),document.body.appendChild(a);const o=document.createElement("img");o.src=maiLocationsVars.loaderUrl,a.classList.add("mai-locations-loader-svg"),a.appendChild(o),Object.keys(s).forEach(e=>{if(e in i){var a=Array.isArray(i[e])?i[e].join():i[e].toString(),o=Array.isArray(s[e])?s[e]:s[e].toString();""!==a&&a!==o?t.searchParams.set(e,a):t.searchParams.delete(e)}}),window.location=t.href.replace(/\/page\/\d+/,"")}const t=new URL(window.location.href),a=document.querySelectorAll(".mailocations-map"),o=document.querySelectorAll(".mailocations-autocomplete"),n=document.querySelectorAll(".mailocations-filter"),l=document.querySelectorAll(".mailocations-filter-clear"),s=maiLocationsVars.defaults,i=maiLocationsVars.params,r=maiLocationsVars.autoComplete;for(const e of a){let t=null;const a=e.querySelectorAll(".marker"),o=new google.maps.Map(e,{zoom:parseInt(e.dataset.zoom),mapTypeId:google.maps.MapTypeId.ROADMAP,center:i.lat&&i.lng?{lat:parseFloat(i.lat),lng:parseFloat(i.lng)}:null});if(o.markers=[],i.lat&&i.lng){const e={path:"M96 0c35.346 0 64 28.654 64 64s-28.654 64-64 64-64-28.654-64-64S60.654 0 96 0m48 144h-11.36c-22.711 10.443-49.59 10.894-73.28 0H48c-26.51 0-48 21.49-48 48v136c0 13.255 10.745 24 24 24h16v136c0 13.255 10.745 24 24 24h64c13.255 0 24-10.745 24-24V352h16c13.255 0 24-10.745 24-24V192c0-26.51-21.49-48-48-48z",fillColor:"rgba(0,0,0,0.8)",fillOpacity:1,strokeWeight:0,scale:.05,anchor:new google.maps.Point(110,600)};t=new google.maps.Marker({position:{lat:parseFloat(i.lat),lng:parseFloat(i.lng)},map:o,icon:e,animation:google.maps.Animation.DROP}),o.markers.push(t)}for(const e of a){var c=new google.maps.Marker({position:{lat:parseFloat(e.dataset.lat),lng:parseFloat(e.dataset.lng)},map:o});if(e.innerHTML){var m=new google.maps.InfoWindow({content:e.innerHTML});c.infowindow=m,c.addListener("click",function(){return this.infowindow.open(o,this)})}o.markers.push(c)}const n=new google.maps.LatLngBounds;new markerClusterer.MarkerClusterer({map:o,markers:o.markers});if(o.markers.length){for(const e of o.markers)n.extend(e.getPosition());1===o.markers.length?o.setCenter(n.getCenter()):o.fitBounds(n)}else o.setCenter({lat:37.0902,lng:-95.7129}),o.setZoom(4)}for(const t of o){let a=t.parentElement.parentElement.querySelectorAll(".mailocations-autocomplete-distance"),o=t.parentElement.parentElement.querySelectorAll(".mailocations-autocomplete-unit"),n=t.parentElement.querySelectorAll(".mailocations-autocomplete-clear")[0];a="undefined"!==a?a[0]:"",o="undefined"!==o?o[0]:"";const l=new google.maps.places.Autocomplete(t,r);l.addListener("place_changed",function(){const a=l.getPlace();if(!a||!a.geometry)return;const o=a.geometry.location.lat(),n=a.geometry.location.lng();let s=null,r=null,c=null;if(a.address_components){for(const e of a.address_components){var m=e.types[0];"country"===m&&(s=e.short_name),"administrative_area_level_1"===m&&(r=e.short_name)}s&&("US"===s?r&&(i.state=r):c&&(i.province=c))}i.address=t.value,i.lat=o,i.lng=n,e()}),a&&a.addEventListener("change",function(){i.distance=this.value,i.address&&e()}),o&&o.addEventListener("change",function(){i.unit=this.value,i.address&&e()}),n.addEventListener("click",function(){var a=t.getAttribute("value");t.setAttribute("value",""),t.value="",i.address="",i.lat="",i.lng="",i.state="",i.province="",a&&e()})}for(const t of n){let a,o;t.addEventListener("change",function(){a="select"===this.tagName.toLowerCase(),o="radio"===this.getAttribute("type"),i[this.dataset.filter]=this.dataset.filter in i?i[this.dataset.filter]:[],this.checked||a?a&&!this.value?i[this.dataset.filter]=[]:o||a?i[this.dataset.filter]=[this.value]:i[this.dataset.filter].push(this.value):i[this.dataset.filter].splice(i[this.dataset.filter].indexOf(this.value),1),e()})}for(const t of l)t.addEventListener("click",function(){Object.keys(i).forEach(e=>{i[e]=""}),e()})}document.addEventListener("DOMContentLoaded",function(){if(document.querySelectorAll(".mailocations-map").length||document.querySelectorAll(".mailocations-autocomplete").length){const e=document.getElementById("mai-locations-js"),t=document.createElement("script");let a=`https://maps.googleapis.com/maps/api/js?key=${maiLocationsVars.apiKey}`;document.querySelectorAll(".mailocations-autocomplete").length&&(a+="&libraries=places"),t.src=a+="&loading=async",t.src=a+="&callback=initLocations",e.parentElement.insertBefore(t,e)}else initLocations()});