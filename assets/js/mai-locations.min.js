function initLocations(){const e=new URL(window.location.href),t=document.querySelectorAll(".mailocations-map"),a=document.querySelectorAll(".mailocations-autocomplete"),o=document.querySelectorAll(".mailocations-filter"),n=document.querySelectorAll(".mailocations-filter-clear"),l=maiLocationsVars.defaults,r=maiLocationsVars.params,s=maiLocationsVars.autoComplete;for(const e of t){let t=null;const a=e.querySelectorAll(".marker"),o=new google.maps.Map(e,{zoom:parseInt(e.dataset.zoom),mapTypeId:google.maps.MapTypeId.ROADMAP,center:r.lat&&r.lng?{lat:parseFloat(r.lat),lng:parseFloat(r.lng)}:null});if(o.markers=[],r.lat&&r.lng){const e={path:"M96 0c35.346 0 64 28.654 64 64s-28.654 64-64 64-64-28.654-64-64S60.654 0 96 0m48 144h-11.36c-22.711 10.443-49.59 10.894-73.28 0H48c-26.51 0-48 21.49-48 48v136c0 13.255 10.745 24 24 24h16v136c0 13.255 10.745 24 24 24h64c13.255 0 24-10.745 24-24V352h16c13.255 0 24-10.745 24-24V192c0-26.51-21.49-48-48-48z",fillColor:"rgba(0,0,0,0.8)",fillOpacity:1,strokeWeight:0,scale:.05,anchor:new google.maps.Point(110,600)};t=new google.maps.Marker({position:{lat:parseFloat(r.lat),lng:parseFloat(r.lng)},map:o,icon:e,animation:google.maps.Animation.DROP}),o.markers.push(t)}for(const e of a){var i=new google.maps.Marker({position:{lat:parseFloat(e.dataset.lat),lng:parseFloat(e.dataset.lng)},map:o});if(e.innerHTML){var c=new google.maps.InfoWindow({content:e.innerHTML});i.infowindow=c,i.addListener("click",(function(){return this.infowindow.open(o,this)}))}o.markers.push(i)}new markerClusterer.MarkerClusterer({map:o,markers:o.markers});const n=new google.maps.LatLngBounds;for(const e of o.markers)n.extend(e.getPosition());1===o.markers.length?o.setCenter(n.getCenter()):o.fitBounds(n)}for(const e of a){let t=e.parentElement.parentElement.querySelectorAll(".mailocations-autocomplete-distance"),a=e.parentElement.parentElement.querySelectorAll(".mailocations-autocomplete-unit"),o=e.parentElement.querySelectorAll(".mailocations-autocomplete-clear")[0];t="undefined"!==t?t[0]:"",a="undefined"!==a?a[0]:"";const n=new google.maps.places.Autocomplete(e,s);n.addListener("place_changed",(function(){const t=n.getPlace();if(!t||!t.geometry)return;const a=t.geometry.location.lat(),o=t.geometry.location.lng();let l=null,s=null;if(t.address_components){for(const e of t.address_components){var i=e.types[0];"country"===i&&(l=e.short_name),"administrative_area_level_1"===i&&(s=e.short_name)}l&&"US"===l&&s&&(r.state=s)}r.address=e.value,r.lat=a,r.lng=o,m()})),t&&t.addEventListener("change",(function(){r.distance=this.value,r.address&&m()})),a&&a.addEventListener("change",(function(){r.unit=this.value,r.address&&m()})),o.addEventListener("click",(function(){var t=e.getAttribute("value");e.setAttribute("value",""),e.value="",r.address="",r.lat="",r.lng="",r.state="",r.province="",t&&m()}))}for(const e of o){let t,a;e.addEventListener("change",(function(){t="select"===this.tagName.toLowerCase(),a="radio"===this.getAttribute("type"),r[this.dataset.filter]=this.dataset.filter in r?r[this.dataset.filter]:[],this.checked||t?t&&!this.value?r[this.dataset.filter]=[]:a?r[this.dataset.filter]=[this.value]:r[this.dataset.filter].push(this.value):r[this.dataset.filter].splice(r[this.dataset.filter].indexOf(this.value),1),m()}))}for(const e of n)e.addEventListener("click",(function(){Object.keys(r).forEach((e=>{r[e]=""})),m()}));function m(){Object.keys(l).forEach((t=>{if(t in r){var a=Array.isArray(r[t])?r[t].join():r[t].toString(),o=Array.isArray(l[t])?l[t]:l[t].toString();""!==a&&a!==o?e.searchParams.set(t,a):e.searchParams.delete(t)}})),window.location=e.href.replace(/\/page\/\d+/,"")}}if(document.querySelectorAll(".mailocations-map").length||document.querySelectorAll(".mailocations-autocomplete").length){const e=document.getElementById("mai-locations-js"),t=document.createElement("script");let a=`https://maps.googleapis.com/maps/api/js?key=${maiLocationsVars.apiKey}`;if(document.querySelectorAll(".mailocations-autocomplete").length&&(a+="&libraries=places"),t.src=a+="&callback=initLocations",e.parentElement.insertBefore(t,e),document.querySelectorAll(".mailocations-map").length){const t=document.createElement("script");t.src=maiLocationsVars.markerCluster,e.parentElement.insertBefore(t,e)}}else initLocations();