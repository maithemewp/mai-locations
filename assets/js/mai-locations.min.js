function initLocations(){function t(t,e){let n=null,a=document.querySelectorAll(t),o=a.length?a[0]:"";return o&&(n=o.value),n||e}function e(t=!1){if(!t&&s.length)return;let e=document.getElementsByTagName("main");e=e.length?e[0]:document.body,e.style.opacity=.5,Object.keys(r).forEach(t=>{if(t in c){var e=Array.isArray(c[t])?c[t].join():c[t].toString(),a=Array.isArray(r[t])?r[t]:r[t].toString();""!==e&&e!==a?n.searchParams.set(t,e):n.searchParams.delete(t)}}),window.location=n.href.replace(/\/page\/\d+/,"")}const n=new URL(window.location.href),a=document.querySelectorAll(".mailocations-map"),o=document.querySelectorAll(".mailocations-autocomplete"),l=document.querySelectorAll(".mailocations-filter"),s=document.querySelectorAll(".mailocations-filter-submit"),i=document.querySelectorAll(".mailocations-filter-clear"),r=maiLocationsVars.defaults,c=maiLocationsVars.params;maiLocationsVars.autoComplete;let m=0;for(const e of a){let n=null,a=0,o=parseFloat(c.lat),l=parseFloat(c.lng);const s=e.querySelectorAll(".marker"),i=new google.maps.Map(e,{zoom:parseInt(e.dataset.zoom),mapTypeId:google.maps.MapTypeId.ROADMAP,center:o&&l?{lat:o,lng:l}:null,mapId:"mailocationsMap"+m++});if(i.markers=[],o&&l){const e=new google.maps.marker.PinElement({background:"var(--color-primary, #333)",borderColor:"var(--color-primary-dark, #000)",glyphColor:"var(--color-primary-dark, rgba(0, 0, 0, 0.2))",scale:.6});n=new google.maps.marker.AdvancedMarkerElement({position:{lat:o,lng:l},map:i,content:e.element}),i.markers.push(n);let s=c.distance,r=c.unit;if(s||(s=t(".mailocations-autocomplete-distance",null)),r||(r=t(".mailocations-autocomplete-unit","mi")),s){a=parseFloat(s),"mi"===r?a*=1609.34:"km"===r&&(a*=1e3);new google.maps.Circle({strokeColor:"#ff0000",strokeOpacity:.5,strokeWeight:1,fillColor:"#ff0000",fillOpacity:.05,map:i,center:{lat:o,lng:l},radius:a})}}for(const t of s){const e=new google.maps.marker.AdvancedMarkerElement({position:{lat:parseFloat(t.dataset.lat),lng:parseFloat(t.dataset.lng)},map:i});if(t.innerHTML){const n=new google.maps.InfoWindow({content:t.innerHTML});e.infowindow=n,e.addListener("click",function(){return this.infowindow.open(i,this)})}i.markers.push(e)}if(i.markers.length){new markerClusterer.MarkerClusterer({map:i,markers:i.markers});if(a){const t=i.getCenter(),e=a/111300,n=e,o=e/Math.cos(t.lat()*Math.PI/180),l=new google.maps.LatLngBounds(new google.maps.LatLng(t.lat()-n,t.lng()-o),new google.maps.LatLng(t.lat()+n,t.lng()+o));i.fitBounds(l)}else{const t=new google.maps.LatLngBounds;for(const e of i.markers)t.extend(e.position);1===i.markers.length?i.setCenter(t.getCenter()):i.fitBounds(t)}}else i.setCenter({lat:37.0902,lng:-95.7129}),i.setZoom(4)}for(const t of o){let n=t.parentElement.parentElement.querySelectorAll(".mailocations-autocomplete-distance"),a=t.parentElement.parentElement.querySelectorAll(".mailocations-autocomplete-unit"),o=t.parentElement.querySelectorAll(".mailocations-autocomplete-clear")[0],l=t.dataset.countries,i={fields:["geometry","name"]};n=n.length?n[0]:"",a=a.length?a[0]:"",l&&(i.componentRestrictions={country:l.split(",")});const r=new google.maps.places.Autocomplete(t,i);r.addListener("place_changed",function(){const n=r.getPlace();if(!n||!n.geometry)return;const a=n.geometry.location.lat(),o=n.geometry.location.lng();let l=null,s=null,i=null;if(n.address_components){for(const t of n.address_components){var m=t.types[0];"country"===m&&(l=t.short_name),"administrative_area_level_1"===m&&(s=t.short_name)}l&&("US"===l?s&&(c.state=s):i&&(c.province=i))}c.address=t.value,c.lat=a,c.lng=o,e()}),n&&n.addEventListener("change",function(){c.distance=this.value,c.address&&e()}),a&&a.addEventListener("change",function(){c.unit=this.value,c.address&&e()}),o&&o.addEventListener("click",function(){var n=t.getAttribute("value");t.setAttribute("value",""),t.value="",c.address="",c.lat="",c.lng="",c.state="",c.province="",s.length&&t.focus(),n&&e()})}for(const t of l){let n,a;t.addEventListener("change",function(){n="select"===this.tagName.toLowerCase(),a="radio"===this.getAttribute("type"),c[this.dataset.filter]=this.dataset.filter in c?c[this.dataset.filter]:[],this.checked||n?n&&!this.value?c[this.dataset.filter]=[]:a||n?c[this.dataset.filter]=[this.value]:c[this.dataset.filter].push(this.value):c[this.dataset.filter].splice(c[this.dataset.filter].indexOf(this.value),1),e()})}for(const t of s)t.addEventListener("click",function(){this.innerHTML='&nbsp;<svg class="mailocations-loading-svg" width="36" height="12" viewBox="0 0 36 12" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t<style>\n\t\t\t\t.mailocations-loading-svg {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 50%;\n\t\t\t\t\tleft: 50%;\n\t\t\t\t\ttransform: translate(-50%, -50%);\n\t\t\t\t}\n\t\t\t\t.mailocations-spinner {\n\t\t\t\t\tanimation: spinner_xe7Q .8s linear infinite;\n\t\t\t\t}\n\t\t\t\t.mailocations-spinner2 {\n\t\t\t\t\tanimation-delay: -.65s;\n\t\t\t\t}\n\t\t\t\t.mailocations-spinner3 {\n\t\t\t\t\tanimation-delay: -.5s;\n\t\t\t\t}\n\t\t\t\t@keyframes spinner_xe7Q{\n\t\t\t\t\t93.75%,100% { r:3px; }\n\t\t\t\t\t46.875% { r:.2px; }\n\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t\t<circle class="mailocations-spinner" cx="4" cy="6" r="3"/>\n\t\t\t\t<circle class="mailocations-spinner mailocations-spinner2" cx="18" cy="6" r="3"/>\n\t\t\t\t<circle class="mailocations-spinner mailocations-spinner3" cx="30" cy="6" r="3"/>\n\t\t\t</svg>',e(!0)});for(const t of i)t.addEventListener("click",function(){Object.keys(c).forEach(t=>{c[t]=""}),e(!0)})}document.addEventListener("DOMContentLoaded",function(){if(document.querySelectorAll(".mailocations-map").length||document.querySelectorAll(".mailocations-autocomplete").length){const t=document.getElementById("mai-locations-js"),e=document.createElement("script");let n=`https://maps.googleapis.com/maps/api/js?key=${maiLocationsVars.apiKey}`,a=["marker"];document.querySelectorAll(".mailocations-autocomplete").length&&a.push("places"),n+="&libraries="+a.join(","),e.src=n+="&loading=async",e.src=n+="&callback=initLocations",t.parentElement.insertBefore(e,t)}else initLocations()});