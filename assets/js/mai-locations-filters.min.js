window.initMap=function(){const e=new URL(window.location.href),t=document.querySelectorAll(".mailocations-autocomplete"),a=document.querySelectorAll(".mailocations-filter"),n=document.querySelectorAll(".mailocations-filter-submit"),l=document.querySelectorAll(".mailocations-filter-clear");var o={};Object.keys(maiLocationsVars).forEach((t=>{var a=e.searchParams.get(t);o[t]=null!==a?encodeURI(a):o[t]}));var i=function(){Object.keys(o).forEach((t=>{o[t]=o[t].split(),o[t].length?e.searchParams.set(t,o[t].join(",")):e.searchParams.delete(t)})),window.location=e.href};t.forEach((e=>{var t=e.parentElement.parentElement.querySelectorAll(".mailocations-autocomplete-distance"),a=e.parentElement.parentElement.querySelectorAll(".mailocations-autocomplete-units"),n=e.parentElement.querySelectorAll(".mailocations-autocomplete-clear")[0];t="undefined"!==t?t[0]:null,a="undefined"!==a?a[0]:null;const l=new google.maps.places.Autocomplete(e,{componentRestrictions:{country:"us"},fields:["geometry","name"],strictBounds:!1});l.addListener("place_changed",(function(){var t=l.getPlace(),a=t.geometry.location.lat(),n=t.geometry.location.lng();o.address=e.value,o.lat=a,o.lng=n,i()})),t&&t.addEventListener("change",(function(){o.distance=this.value,o.address&&i()})),a&&a.addEventListener("change",(function(){o.units=this.value,o.address&&i()})),n.addEventListener("click",(function(){var t=e.getAttribute("value");e.setAttribute("value",""),e.value="",o.address="",o.lat="",o.lng="",t&&i()}))})),a.forEach((e=>{e.addEventListener("change",(function(){var e="select"===this.tagName.toLowerCase();this.checked||e?e&&!this.value?o[this.dataset.filter]=[]:o[this.dataset.filter].push(this.value):o[this.dataset.filter].splice(o[this.dataset.filter].indexOf(this.value),1),i()}))})),n.forEach((e=>{e.addEventListener("click",(function(){i()}))})),l.forEach((e=>{e.addEventListener("click",(function(){Object.keys(o).forEach((e=>{o[e]=[]})),t.forEach((e=>{e.setAttribute("value","")})),i()}))}))};