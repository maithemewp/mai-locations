window.initMap=function(){const e=new URL(window.location.href),t=document.querySelectorAll(".mailocations-autocomplete"),a=document.querySelectorAll(".mailocations-filter"),n=document.querySelectorAll(".mailocations-filter-clear"),i=maiLocationsVars.defaults;var o=maiLocationsVars.params,r=maiLocationsVars.autoComplete,s=function(){Object.keys(i).forEach((t=>{if(t in o){var a=Array.isArray(o[t])?o[t].join():o[t].toString(),n=Array.isArray(i[t])?i[t]:i[t].toString();""!==a&&a!==n?e.searchParams.set(t,a):e.searchParams.delete(t)}})),window.location=e.href};t.forEach((e=>{var t=e.parentElement.parentElement.querySelectorAll(".mailocations-autocomplete-distance"),a=e.parentElement.parentElement.querySelectorAll(".mailocations-autocomplete-unit"),n=e.parentElement.querySelectorAll(".mailocations-autocomplete-clear")[0];t="undefined"!==t?t[0]:"",a="undefined"!==a?a[0]:"";const i=new google.maps.places.Autocomplete(e,r);i.addListener("place_changed",(function(){const t=i.getPlace();if(t&&t.geometry){var a=t.geometry.location.lat(),n=t.geometry.location.lng(),r=null,l=null;if(t.address_components){for(const e of t.address_components){var c=e.types[0];"country"===c&&(r=e.short_name),"administrative_area_level_1"===c&&(l=e.short_name)}r&&"US"===r&&l&&(o.state=l)}o.address=e.value,o.lat=a,o.lng=n,s()}})),t&&t.addEventListener("change",(function(){o.distance=this.value,o.address&&s()})),a&&a.addEventListener("change",(function(){o.unit=this.value,o.address&&s()})),n.addEventListener("click",(function(){var t=e.getAttribute("value");e.setAttribute("value",""),e.value="",o.address="",o.lat="",o.lng="",o.state="",o.province="",t&&s()}))})),a.forEach((e=>{var t;e.addEventListener("change",(function(){t="select"===this.tagName.toLowerCase(),o[this.dataset.filter]=this.dataset.filter in o?o[this.dataset.filter]:[],this.checked||t?t&&!this.value?o[this.dataset.filter]=[]:o[this.dataset.filter].push(this.value):o[this.dataset.filter].splice(o[this.dataset.filter].indexOf(this.value),1),s()}))})),n.forEach((e=>{e.addEventListener("click",(function(){Object.keys(o).forEach((e=>{o[e]=""})),s()}))}))};